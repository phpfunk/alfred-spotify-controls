### Controls ##### play, pause, stop, p, NULL# mute, unmute, m# next, n, ># prev, pr, previous, <, <<# << (takes you to the actual previous track, think double click)# quit, end, kill, exit, e, q# start, init, s# now, i, current# artist# album# disc# duration, time, d# count, plays# track, t, name, song# starred, star, fav# popularity, rank, pop# id# url# appurl# version################################# Pause Example: spot pause# Change Volume: spot 75# Mute: spot mute# Unmute: spot mute || spot unmute# Start App: spot start# Kill App: spot kill# Current Track: spot current || spot now# Track Info: spot duration || spot id || spot OPT# Search: spot search de la soul# Artist Only Search: spot search artist:de la soul# Album Only Search: spot search album:stakes is high# Track Only Search: spot search track:de la soul# Get Spotify Version: spot version### END ####to calcTime(t)    set m to (t div 60 as string)    set s to t mod 60    if s is less than 10 then        set s to "0" & (s as string)    else        set s to (s as string)    end if    return m & ":" & send calcTimeon filterData(s, prepend, empty)    if s is missing value or s is equal to "" or s is equal to "0" then        if empty is true then            return ""        else            return "Not Found"        end if    else        return prepend & s    end ifend filterDataon replaceText(find, replace, someText)    set prevTIDs to text item delimiters of AppleScript    set text item delimiters of AppleScript to find    set someText to text items of someText    set text item delimiters of AppleScript to replace    set someText to "" & someText    set text item delimiters of AppleScript to prevTIDs    return someTextend replaceTextto splitString(aString, delimiter)    set retVal to {}    set prevDelimiter to AppleScript's text item delimiters    #tell me to log delimiter    set AppleScript's text item delimiters to {delimiter}    set retVal to every text item of aString    set AppleScript's text item delimiters to prevDelimiter    return retValend splitStringon alfred_script(q)    set ret to ""    #Command Hashes    set n to {"n", "next", ">"}    set p to {"p", "play", "pause", "stop", ""}    set pr to {"pr", "prev", "previous", "<", "<<"}    set s to {"s", "start", "init"}    set e to {"e", "q", "quit", "kill", "end", "exit"}    set m to {"m", "mute", "unmute"}    set i to {"i", "now", "current"}    set t to {"t", "track", "name", "song"}    set d to {"d", "duration", "time"}    set c to {"count", "plays"}    set f to {"star", "starred", "fav"}    set po to {"pop", "popularity", "rank"}    set ar to {"artist", "album_artist"}    set h to {"help", "?"}    tell application "Spotify"        if q is in p then            playpause        else if q is in n then            next track            my alfred_script("i")        else if q is in pr then            previous track            if q is equal to "<<" then                previous track            end if            my alfred_script("i")        else if q is in m then            if sound volume is less than or equal to 0 then                set sound volume to 100            else                set sound volume to 0            end if        else if q is in e then            quit        else if q is in s then            activate        else if q is in i then            set ret to "Now Playing: " & name of current track & " by " & artist of current track & " on " & album of current track        else if q is in ar then            set arr to my filterData(artist of current track, "", false)            set album_arr to my filterData(album artist of current track, "", true)            if arr is equal to album_arr or album_arr is equal to "" then                set ret to "Artist: " & arr            else                set ret to "Artist: " & arr & "Album Artist: " & album_arr            end if        else if q is equal to "album" then            set ret to "Album Name: " & my filterData(album of current track, "", false)        else if q is equal to "disc" then            set ret to "Disc Number: " & my filterData((disc number of current track as string), "", false)        else if q is in d then            set ret to "Duration: " & my calcTime(duration of current track)        else if q is in c then            set ret to "Play Count: " & (played count of current track as string)        else if q is in f then            if starred of current track is equal to true then                set ret to "Starred: Yes"            else                set ret to "Starred: No"            end if        else if q is in po then            set ret to "Popularity: " & (popularity of current track as string) & " out of 100"        else if q is equal to "id" then            set ret to "ID: " & id of current track            set the clipboard to id of current track        else if q is in t then            set num to my filterData((track number of current track as string), "", true)            if num is not equal to "" then                set num to " (#" & num & ")"            end if            set ret to "Current Track" & num & ": " & name of current track        else if q is equal to "url" then            set track_id to id of current track            set AppleScript's text item delimiters to ":"            set track_id to third text item of track_id            set AppleScript's text item delimiters to ""            set real_url to "http://open.spotify.com/track/" & track_id            set ret to "URL: " & real_url            set the clipboard to real_url        else if q is equal to "appurl" then            set ret to "Spotify URL: " & spotify url of current track            set the clipboard to spotify url of current track        else if "app" is in q then            activate            open location "spotify:app:" & my replaceText("app ", "", q)        else if q is equal to "shuffle" then            if shuffling enabled is true then                if shuffling is true then                    set shuffling to false                else                    set shuffling to true                end if            else                set ret to "Shuffling is not currently enabled."            end if        else if q is equal to "repeat" then            if shuffling enabled is true then                if repeating is true then                    set repeating to false                else                    set repeating to true                end if            else                set ret to "Repeating is not currently enabled."            end if        else if q is equal to "dev" then            set ret to "Jeff Johns | http://phpfunk.me | @phpfunk"        else if q is equal to "version" then            set ret to "Spotfy Version: " & version            set the clipboard to version        else if q is in h then            open location "https://github.com/phpfunk/alfred-spotify-controls/blob/master/README.md"        else            try                (q as number) div 1                set sound volume to q            on error                set ret to "The option '" & q & "' is invalid. Please try again."            end try        end if    end tell    if ret is not equal to "" then        return ret    end ifend alfred_script